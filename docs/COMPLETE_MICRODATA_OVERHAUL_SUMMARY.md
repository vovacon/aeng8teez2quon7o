# –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ä–∞–∑–º–µ—Ç–∫–∏ Schema.org –¥–ª—è smiles

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚úÖ –£–±—Ä–∞–Ω —Ä–∞–∑–¥–µ–ª "–ú–∏–∫—Ä–æ—Ä–∞–∑–º–µ—Ç–∫–∞ Schema.org (–¥–ª—è smiles)" –∏–∑ –∞–¥–º–∏–Ω–∫–∏  
‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã  
‚úÖ –ê–¥–º–∏–Ω–∫–∞ —Å—Ç–∞–ª–∞ —á–∏—â–µ –∏ –ø—Ä–æ—â–µ

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ Review –º–∏–∫—Ä–æ—Ä–∞–∑–º–µ—Ç–∫–∏  
‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è**  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏: `smile.order_eight_digit_id` ‚Üí `comments.order_eight_digit_id`  
‚úÖ `reviewBody` –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (`comment.body`)

### 3. –¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è itemReviewed
‚úÖ **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞** –∏–∑ `order_products.title` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) –∏–ª–∏ `products.header`  
‚úÖ **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞** —á–µ—Ä–µ–∑ `product_complects` –∏ `thumb_image()`  
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `order_products_base_id` –¥–ª—è —Ç–æ—á–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ –º–æ–¥–µ–ª–∏ Smile:

```ruby
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
def related_comment
  Comment.find_by_order_eight_digit_id(order_eight_digit_id)
end

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –¥–ª—è Review
def has_review_comment?
  comment = related_comment
  comment && comment.body.present?
end

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ order_product
def review_order_product  
  Order_product.find_by_base_id(order_products_base_id)
end

# –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –¥–ª—è itemReviewed
def review_item_name
  order_product.title || product.header
end

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –¥–ª—è itemReviewed  
def review_item_image
  product.thumb_image(true) # —á–µ—Ä–µ–∑ product_complects
end
```

### –õ–æ–≥–∏–∫–∞ –≤ —à–∞–±–ª–æ–Ω–µ:

```erb
<% if @post.has_review_comment? %>
<script type="application/ld+json">
{
  "@type": "Review",
  "reviewBody": "<%=comment.body%>",           # –†–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  "author": {"name": "<%=comment.name%>"},     # –ò–º—è –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  "itemReviewed": {
    "name": "<%=@post.review_item_name%>",     # –¢–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    "image": "<%=@post.review_item_image%>"    # –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  }
}
</script>
<% end %>
```

## üîÑ –¶–µ–ø–æ—á–∫–∏ —Å–≤—è–∑–µ–π

### –î–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:
```
smile.order_eight_digit_id ‚Üí comments.order_eight_digit_id ‚Üí comment.body
```

### –î–ª—è —Ç–æ–≤–∞—Ä–∞:
```  
smile.order_products_base_id ‚Üí order_products.base_id ‚Üí order_products.title
                                                      ‚Üò
                             order_products.product_id ‚Üí products.id ‚Üí thumb_image()
```

### –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```
products.default_image ‚Üí product_complects.complect_id ‚Üí product_complects.image
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

üéØ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞** - Review —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞  
üìù **–¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤  
üîó **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏** - —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ base_id  
üöÄ **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - —É–±—Ä–∞–Ω—ã –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏  
üì± **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ú–∏–∫—Ä–æ—Ä–∞–∑–º–µ—Ç–∫–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º –æ –∑–∞–∫–∞–∑–∞—Ö –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö!
