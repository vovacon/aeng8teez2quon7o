# Исправление мигания панели корзины

## Проблема
Панель корзины мигала - исчезала и появлялась снова из-за:
- Множественных проверок и перепроверок
- Принудительных тестов и отладочных показов/скрытий
- Частых AJAX обновлений (каждые 30 секунд)

## Решение

### 1. Упрощена логика показа
```javascript
// Было: сложные проверки hasItems && hasValue
// Стало: просто
const shouldShowPanel = hasItems;
```

### 2. Убраны нестабильные проверки
- Удалена проверка на нулевую сумму (hasValue)
- Убрана защита от неполных данных (которая вызывала return)
- Удалено дополнительное CSS скрытие

### 3. Уменьшена частота обновлений
- Периодическое: 30с → 120с (2 минуты)
- При добавлении: 1с → 1.5с задержка
- При resize: добавлен debounce 300ms

### 4. Убраны отладочные вмешательства
- Принудительное показ/скрытие на 3 секунды
- Обильное console.log логирование

### 5. Оставлено минимальное логирование
```javascript
// Логируем только если есть товары
if (data.total_q > 0) {
  console.log('[CART PANEL] Items in cart:', data.total_q, 'Will show panel:', shouldShowPanel && !isCartPage && window.innerWidth < 1024);
}
```

## Результат

**Панель теперь:**
✅ Показывается стабильно когда есть товары  
✅ Не мигает и не исчезает неожиданно  
✅ Обновляется реже (2 мин вместо 30с)  
✅ Простая и понятная логика  

**Правило:** Если `data.total_q > 0` и не на странице корзины и мобильное устройство - показываем панель.
