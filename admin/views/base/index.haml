- # encoding: utf-8
.base-text
  %p Добро пожаловать в панель администрирования сайта самого лучшего в мире магазина цветов «Розарио»!
  
  -if current_account
    %p
      %strong Пользователь: 
      - begin
        = current_account.display_name
      - rescue => e
        = current_account.email || "Пользователь #{current_account.id}"
      - begin
        %span.label{:class => role_class(current_account.role)}
          =current_account.role
      - rescue => e
        %span.label.label-default
          = current_account.role || 'unknown'
        
    -if can_manage_permissions?
      .permissions-block
        %strong Управление правами:
        =link_to "Настроить права доступа", url(:permissions, :index), :class => "btn btn-info btn-small", :style => "margin-left: 10px;"
        
    %h3 Доступные разделы:
    .available-modules
      -if @available_modules && @available_modules.any?
        .row
          -@available_modules.each_with_index do |mod, index|
            -if index % 4 == 0
              .row
            .span3
              =link_to "/admin/#{mod}", :class => "module-card-link" do
                .module-card
                  %h4=humanize_module_name(mod)
                  .module-icon
                    - icon_path = "app/views/icons/#{mod}.svg"
                    - if File.exist?(icon_path)
                      = File.read(icon_path).html_safe
                    - else
                      %p.module-code=mod
      -else
        .alert.alert-warning У вас нет доступа ни к одному разделу. Обратитесь к администратору.

.base-icons
  .btn-group
    .btn.btn-primary{:title => ""}=tag_icon("icon-2x", "")
    .btn.btn-success{:title => ""}=tag_icon("icon-2x", "")
    .btn.btn-info{:title => ""}=tag_icon("icon-2x", "")
    .btn.btn-warning{:title => ""}=tag_icon("icon-2x", "")
    .btn.btn-danger{:title => ""}=tag_icon("icon-2x", "")

.base-text
  - project_modules.each do |project_module|
    %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
      =link_to I18n.t("padrino.admin.menu.#{project_module.name}"), project_module.path('/admin')
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Слайдшоу", url(:slideshows, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Слайды", url(:slides, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Заказы", url(:orders,:index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Рассылка", url(:mailing, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Теги", url(:tags, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Витрина", "/admin/categories/showcase"
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Улыбки", url(:smiles, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    %a{ href: "/category/oldbukets" } Старая версия букетов
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Календарь (заказы)", url(:disabled_dates, :index)
  %h2{:style => "display:inline;margin-right:12px;line-height:1.65;margin-right:30px;"}
    =link_to "Способы оплаты", url(:payment_methods, :index)

:css
  .module-card-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }
  .module-card-link:hover {
    text-decoration: none;
    color: inherit;
  }
  .module-card {
    border: 1px solid #ddd;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 4px;
    background: #f9f9f9;
    text-align: center;
    transition: all 0.2s ease;
    cursor: pointer;
  }
  .module-card:hover {
    background: #e9e9e9;
    border-color: #bbb;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  .module-card h4 {
    margin: 0 0 10px 0;
    color: #333;
    transition: color 0.2s ease;
  }
  .module-card:hover h4 {
    color: #000;
  }
  .available-modules .row {
    margin-bottom: 10px;
  }
  .module-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
  }
  .module-icon svg {
    width: 48px;
    height: 48px;
    stroke: #000000;
    transition: all 0.2s ease;
  }
  .module-card:hover .module-icon svg {
    stroke: #0066cc;
    transform: scale(1.1);
  }
  .module-code {
    color: #999;
    font-size: 12px;
    margin: 5px 0;
  }
  
  .permissions-block {
    background-color: #d9edf7;
    border: 1px solid #bee5eb;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
    color: #31708f;
  }

